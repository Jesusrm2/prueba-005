<app-loading-scream [isLoading]="isLoading"></app-loading-scream>
<div class="grid-container">
    <div class="content">
        <p-table [value]="listUsers" [tableStyle]="{ 'min-width': '30rem' }">
            <ng-template pTemplate="caption">
                <div class="flex">
                    <button type="button" pButton pRipple icon="pi pi-plus" class="p-button-info ml-auto" pTooltip="Agregar usuario" tooltipPosition="left" (click)="formUser()"></button>
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th>Nombre de usuario</th>
                    <th>Email</th>
                    <th>Fecha de creación</th>
                    <th>Rol</th>
                    <th>Cuenta</th>
                    <th>Aprobado</th>
                    <th>Fecha de aprobación</th>
                    <th style="width: 5rem"></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-usuario>
                <tr>
                    <td>{{ usuario.username }}</td>
                    <td>{{ usuario.email }}</td>
                    <td>{{ usuario.creationdate }}</td>
                    <td> {{ getRoleName(usuario.rol_rolid) }} </td>                    
                    <td>
                      <p-tag *ngIf="usuario.status_statusid == 1" severity="success" value="Activo"></p-tag>
                      <p-tag *ngIf="usuario.status_statusid == 2" severity="warning" value="Inactivo"></p-tag>
                      <p-tag *ngIf="usuario.status_statusid == 3" severity="danger" value="Otro estado"></p-tag>
                    </td>
                    <td>
                        <p-tag *ngIf="usuario.userapproval" severity="success" value="Aprobado"></p-tag>
                        <p-tag *ngIf="!usuario.userapproval" severity="danger" value="No aprobado"></p-tag>
                      </td>
                    <td>
                        {{ usuario.dateapproval }}
                    </td>
                    <td>
                        <div class="my-button-group">
                            <div class="flex">
                                <p-button [style.margin-right.px]="10" [raised]="true" severity="help" icon="pi pi-pencil" pTooltip="Editar" tooltipPosition="left" (click)="formUser(usuario)" ></p-button>
                                <p-button [raised]="true" severity="danger" icon="pi pi-trash"  pTooltip="Eliminar" tooltipPosition="left" (click)="deleteUser(usuario)"></p-button>
                            </div>
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>

    </div>
</div>